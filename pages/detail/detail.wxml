<!--pages/detail/detail.wxml-->
<wxs src="./date.wxs" module="util" />

<template name="shipment">
  <view class='container'>
    <view class='row'>
      <text>订单号：{{shipmentCode}}</text>
      <text>状态：{{util.getStatusDisplay(statusCode)}}</text>
    </view>
    <view class='row section'>
      <view style='display:flex;flex-direction: column;'>
        <text>发货人：{{consignor}}</text>
        <text>收货人：{{consignee}}</text>
      </view>
      <block wx:if='{{util.funcName(statusCode)}}'>
          <button bindtap='onEvent' data-shipmentcode='{{shipmentCode}}'
          data-ordercode='{{orderCode}}'
          data-statuscode='{{statusCode}}'>
        {{util.funcName(statusCode)}}
        </button>
      </block>
      
    </view>

    <view class='section'>
      <text>提货地址：{{pickUpAddress}}</text>
      <text>联系电话：{{consignorPhoneNumber}}</text>
      <text>要求提货地址:{{util.dateFormatter(requirePickupStartDate)}} 至 {{util.dateFormatter(requirePickupEndDate)}}</text>
    </view>


    <view class='blue section'>
      <text>送货地址：{{arrivalAddress}}</text>
      <text>联系电话：{{consigneePhoneNumber}}</text>
      <text>要求到货地址:{{util.dateFormatter(requireArrivalStartDate)}} 至 {{util.dateFormatter(requireArrivalEndDate)}}</text>
    </view>
  </view>
</template>

<view>
  <view>运单号： {{shipment.shipmentCode}}
    <view>运单状态: {{shipment.statusDisplay}}</view>
  </view>
  <view>起始地：{{shipment.startAddress}} -----> 结束地: {{shipment.endAddress}}</view>
  <view>总数量（立方米）： {{shipment.totalVolume}}</view>
  <view>总重量（吨）：{{shipment.totalWeight}}</view>
  <view>车牌号： {{shipment.licensePlateNumber}}</view>
  <view>委托方: {{shipment.enterpriseName}}</view>

  <view wx:for="{{shipment.orders}}" wx:key="shipmentCode" wx:for-index="idx" wx:for-item="shipment">
    <template is="shipment" data="{{...shipment}}" />
  </view>
</view>