<!--pages/detail/detail.wxml-->

<wxs src="../../utils/index.wxs" module="util" />
<import src="../templates/shipmentBasic.wxml" />

<template name="order">
  <view class='order'>
    <view class='userInfo'>
      <view class="col_left">
        <view class="shipmentCodeDisplay">
          <text>订单号：{{shipmentCode}}</text>
        </view>
        <view class="nameContainer">
          <view class="row {{util.isStartActive(statusCode) ? 'active' : ''}}">
            <text>发货人：{{consignor}}</text>
          </view>
          <view class="row {{util.isStartActive(statusCode) ? '' : 'active'}}">
            <text>收货人：{{consignee}}</text>
          </view>
        </view>
      </view>

      <view class="col_right">
        <view class="statusDisplay">
          <text>{{util.getStatusDisplay(statusCode)}}</text>
        </view>
        <view class="evntContainer" wx:if='{{util.funcName(statusCode)}}'>
          <view class="btn_event" bindtap='onEvent' data-shipmentcode='{{shipmentCode}}' data-ordercode='{{orderCode}}' data-statuscode='{{statusCode}}'>
            {{util.funcName(statusCode)}}
          </view>
        </view>
      </view>
    </view>

    <view class="section {{util.isStartActive(statusCode) ? 'active' : ''}}">
      <view class="row">
        <text>提货地址：{{pickUpAddress}}</text>
      </view>
      <view class="row">
        <view class="phone">
          <text>联系电话：</text>
          <view class="phoneNumber"><text>{{consignorPhoneNumber}}</text></view>
          <image class="phoneIcon" src="../../assert/icon/phone.png" />
        </view>
      </view>
      <view class="row">
        <text>要求提货地址：{{requirePickupStartDate}} 至 {{requirePickupEndDate}}</text>
      </view>
    </view>

    <view class="section {{util.isStartActive(statusCode) ? '' : 'active'}}">
      <view class="row">
        <text>送货地址：{{arrivalAddress}}</text>
      </view>
      <view class="row">
        <view class="phone">
          <text>联系电话：</text>
          <view class="phoneNumber"><text>{{consigneePhoneNumber}}</text></view>
          <image class="phoneIcon" src="../../assert/icon/phone.png" />
        </view>
      </view>
      <view class="row">
        <text>要求到货地址：{{requireArrivalStartDate}} 至 {{requireArrivalEndDate}}</text>
      </view>
    </view>
  </view>
</template>

<view class="container">
  <template is="shipmentBasic" data="{{...shipment}}" />
  <view class="comment">
    <text>所运订单，共</text>
    <text style="color: #333333"> {{shipment.orderTotal}} </text>个，已完成
    <text style="color: #333333"> {{shipment.completeOrderNumber}} </text>个
  </view>
  <block wx:for="{{shipment.orders}}" wx:key="shipmentCode" wx:for-index="idx" wx:for-item="order">
    <template is="order" data="{{...order}}" />
  </block>
</view>
